h2. Introduction

Ico is a JavaScript graph library that uses "Raphael":http://raphaeljs.com/ to draw and Prototype. This means it can draw charts in multiple browsers, using VML in IE, and SVG in all other browsers. Also because Raphael does not rely on Flash, it works well (and is tested) on iPhone.

The original version was written by Alex Young. The current version features a new API, mainly due to componentization of all graph features, many bug fixes, new features, most importantly implements bullet graphs, angled labels, gradient backgrounds, proper negative bar grpahs rendering.

To see a demo of the possibilities of the current version, check <a href="http://ser2.dialink.com:8080/">the current test suite</a> which is a rendering of index.html.

h3. Targeted graph types

* Sparklines, Sparbars, and Bullet Graphs
* Line graphs
* Bar graphs, Horizontal, Vertical

h3. Design considerations and goals

* Clarity: Use of white-space to help lend clarity to graphs, nominal scale vs. ordinal scale
* Simplicity: Minimal use of decorations and lines, reliance on the Gestalt principle of closure
* Conciseness: Avoidance of graph types that don't efficiently present data (pie charts, radar maps)

These goals are based on recommendations in Stephen Few's books:

* Show Me the Numbers: Designing Tables and Graphs to Enlighten
* Information Dashboard Design

Which was generally in turn based on Edward Tufte's work.

h2. Examples

Simple sparkline, no decoration:
<pre><code>new Ico.SparkLine(
  $( 'market_trend_id' ),                           // The id of the html element where the sparkline is rendered
  [5, 2, -1, 17, 23, 15, 7, 6, -5, -2, 4, 7, 3, 9]  // List of values for market trend
);
</code></pre>

Bullet graph with 3 graph background colors and gradient transtitions:
<pre><code>new Ico.BulletGraph(
  $( 'gross_profit_id' ), // The id of the html element where the bullet graph will be rendered
  85,                     // Actual gross profit for current period as a percentage of gross revenues
  {                       // Bullet graph options
    min: 0,               // Minimum gross profit value
    max: 100,             // Maximum gross profit value
    target: 65,           // Forecasted gross profit value
    graph_background: {   // Defines graph background for gross profit
      key_values: [50, 75],               // Less than 50% is bad, more than 75% is good, in between is ok
      key_colors: ['#555','#999','#ddd'], // The 3 colors representing the 3 quality zones
      colors_transition: 10               // 10% Gradient transition between the different zones
    }
  }
);
</code></pre>

Line graph with 2 lines, angled labels, $ units, meanline, mouse pointer, mouse-over value in status bar, and grid:
<pre><code>var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
new Ico.LineGraph( $( 'gross_profit_id' ),
  {                                                   // The 2 series
    actual: [31, 5, 1, -5, 15, 33, 20, 25, 1, 12, 25, -3],
    forecast: [18, -1, -7, 17, 15, 21, 1, 25, 3, 21, 16, 4]
  },
  {                                                   // Graph components' options
    colors: { actual:'#228899', forecast:'#339933' }, // Series' colors
    curve_amount: 10,                                 // Slightly curve series' lines path
    mouseover_attributes: { stroke: 'green' },        // When hovering over values
    font_size: 16,                                    // for both labels and value labels
    labels: { values: months, angle: 30 },            // Set labels at a 30 degres angle
    x_padding_right: 40,                              // Make more room on the right to properly display labels
    value_labels: {
      units: '$',                                     // Value labels units are $
      units_position: 0                               // Will be rendered before value labels
    },
    background: { color: '#ccf', corners: 5 },        // Set entire div background color and corner size 
    meanline: true,                                   // Display mean value of all series
    grid: true,                                       // Display a grid from labels and value labels
    mouse_pointer: true,                              // Display a cross mouse pointer in graph area
    status_bar : true,                                // Display status bar to show values on mouse over
  }
);
</code></pre>

See index.html for more examples.

h2. Documentation

h3. Graph classes

Graph classes provide defaults components appropriate for each type of graph:

* Ico.Base : base class for all graphs, provides components architecture
* Ico.SparkLine: expected to be rendered as an inline-block
* Ico.SparkBar: expected to be rendered as an inline-block
* Ico.BulletGraph: expected to be rendered as an inline-block
* Ico.BaseGraph (deprecated) : base for line and bar graphs, expected to be unified into Ico.Base
* Ico.LineGraph
* Ico.BarGraph
* Ico.HorizontalBarGraph

To create a graph, call new Ico.<desired graph type>, providing three parameters:
* the DOM element where the graph is to be rendered, and which width and height define the actual graph dimensions
* the value, values, or sets of values, for the data series
* graph component options

h3. Components

Graph features are driven by components. Each graph type defines different default components and graph orientation (horizontal or vertical). Default components can be disabled by explicitly setting the property to false.

* Labels
* Value labels
* Grpah Background
* Background
* Axis
* Meanline
* Focus hint
* Mouse Pointer
* Status Bar

h2. Tested web browsers, known issues

* Firefox: best compromize of quality and speed, some rendering problems of angled fonts
* IE: best angled fonts rendering, slowest by far
* Safari: fastest, bugs: while zooming
* Google Chrome: good quality, bugs: while zooming
* iPhone (Safari): pretty amazing, try it
* Opera: good fonts rendering, bugs: zoom, mouse-over while scrolling

h2. ToDo / Wish list

* Add Legend component
* Add Title component
* Display values in tooltips instead of status bar, tooltips implemented w/ an external DOM library to enable out-of-the-canvas tooltips
* Improve Documentation
* Terminate options componentization
* Componentize series to allow bars and lines in the same graph
* Zoom-in spark lines, spark bars, and bullet graphs on-mouse-over.
* Display full graph of spark lines and spark bars on mouse-click, possibly in a tooltip
* Bar graphs: multiple series columns with 1/3 overlap
* Allow user events on graph elements
* Draw labels on top (or right if orientation) if all values are negative
* Remove prototype dependency, should also work w/ jQuery, Mootools sh/could probably become js library agnostic as most of the browser specific code is in Raphael itself

h3. API changes that might come

The API still needs to be finalized, expect non-backward compatible changes until version 1.0 is released.

Provide series-specific-attributes as keys from serie hash, series becomes an array of hash where each represents a serie if a hash is provided instead of an array then assume there is only one serie.

h2. Requirements

* "Raphael":http://raphaeljs.com
* "Prototype":http://prototypejs.org
